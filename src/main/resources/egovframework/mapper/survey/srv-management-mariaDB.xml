<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="egovframework.srv.management.dao.IManagementDAO"> 

	
	<insert id="insert" parameterType="hashmap">
		<![CDATA[
		    /* ManagementDAO.insert */
			INSERT INTO TN_SRV_MSTR(
						 TMP_MSTR_ID, 
						 SRV_MST_NM, 
						 SRV_MST_TG, 
						 SRV_MST_DC, 
						 SRV_MST_ITEMS, 
						 PBSH_DT, 
						 EXPR_DT, 
						 INST_USRID, 
						 UPDT_USRID
						 )
			VALUES(
						0, 															 				/* TMP_MSTR_ID */
						#{srvMstNm},															/* SRV_MST_NM */
						#{srvMstTg}, 															/* SRV_MST_TG */
						#{srvMstDc}, 															/* SRV_MST_DC */
						COLUMN_CREATE('srvMstItems',#{srvMstItems}),															/* SRV_MST_ITEMS */
						CURRENT_TIMESTAMP,  											/* PBSH_DT */
						CURRENT_TIMESTAMP, 											/* EXPR_DT */
						#{instUsrId}, 																/* INST_USRID */
						#{updtUsrId} 															/* UPDT_USRID */
					) 
		]]>
	</insert>
	
	<update id="update" parameterType="hashmap">
		<![CDATA[
		    /* ManagementDAO.update */
			UPDATE TN_SRV_MSTR	
				SET 
					TMP_MSTR_ID 		= 			#{tmpMstrId},
				    SRV_MST_NM 		= 			#{srvMstNm},
				    SRV_MST_TG 		= 			#{srvMstTg},
				    SRV_MST_DC 		= 			#{srvMstDc},
				    SRV_MST_ITEMS 	= 			COLUMN_CREATE('srvMstItems',#{srvMstItems}),
				    PBSH_DT				= 			#{pbshDt},
				    EXPR_DT 				= 			#{exprDt},
				    UPDT_USRID 		= 			#{updtUsrid}
			WHERE 1=1
			  AND SRV_MSTR_ID 	= 			#{srvMstrId}
		]]>
	</update>
	
	<delete id="delete" parameterType="hashmap">
		<![CDATA[
		    /* ManagementDAO.delete */
			DELETE FROM TN_SRV_MSTR WHERE SRV_MSTR_ID 	=	#{srvMstrId}
		]]>
	</delete>
	
	<select  id="select"  resultType="egovMap">
		<![CDATA[
		    /* ManagementDAO.select */
			SELECT 
				 SRV_MSTR_ID, 
				 TMP_MSTR_ID, 
				 SRV_MST_NM, 
				 SRV_MST_TG, 
				 SRV_MST_DC, 
				 COLUMN_GET(SRV_MST_ITEMS,'srvMstItems' as char) as SRV_MST_ITEMS, 
				 PBSH_DT, 
				 EXPR_DT, 
				 INST_USRID, 
				 UPDT_USRID
			 FROM TN_SRV_MSTR
			WHERE 1=1
			AND SRV_MSTR_ID = #{value} 
		]]>
	</select>
	
	<select  id="list"  resultType="egovMap">
		<![CDATA[
		    /* ManagementDAO.selectAll */
			SELECT 
				 SRV_MSTR_ID, 
				 TMP_MSTR_ID, 
				 SRV_MST_NM, 
				 SRV_MST_TG, 
				 SRV_MST_DC, 
				 /* COLUMN_GET(SRV_MST_ITEMS,'srvMstItems' as char) as SRV_MST_ITEMS, */ 
				 PBSH_DT, 
				 EXPR_DT, 
				 INST_USRID, 
				 UPDT_USRID
			FROM TN_SRV_MSTR;
		]]>
	</select>

</mapper>

